<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Skill.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Assignment2</a> &gt; <a href="index.source.html" class="el_package">citadels</a> &gt; <span class="el_source">Skill.java</span></div><h1>Skill.java</h1><pre class="source lang-java linenums">/*
Haochen Liu
hliu0010
540243105
*/
package citadels;

/**
 * Enum representing purple card skills in the Citadels game.
 * Each skill may trigger on building a district, special activation, extra resource collection,
 * scoring calculation, or cleanup on destruction.
 */
import java.util.ArrayList;
import java.util.List;
import java.util.HashSet;

<span class="fc" id="L17">public enum Skill{</span>
    /**
     * Haunted City skill: For the purposes of victory points, the Haunted City is conisdered to be of the color of your choice.  
     * You cannot use this ability if you built it during the last round of the game
     */
<span class="fc" id="L22">    Haunted_City(&quot;Haunted City&quot;){</span>
        String color;
        int build_round;
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return chosen color
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc bfc" id="L34" title="All 2 branches covered.">            if(build_round!=App.round) return this.color;</span>
<span class="fc" id="L35">            return &quot;purple&quot;;</span>
        }
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc bfc" id="L45" title="All 2 branches covered.">            if(!p.AIplayer) {</span>
<span class="fc" id="L46">                App app=(App) x;</span>
<span class="fc" id="L47">                p.println(&quot;Haunted City is triggered&quot;);</span>
<span class="fc" id="L48">                p.print(&quot;Choose a color for Haunted City: \&quot;red\&quot;, \&quot;yellow\&quot;, \&quot;green\&quot;, \&quot;blue\&quot;, \&quot;purple\&quot;\n&gt; &quot;);</span>
<span class="fc" id="L49">                String[] tmp=new String[]{&quot;red&quot;, &quot;yellow&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;purple&quot;};</span>
<span class="fc" id="L50">                this.color=app.getInput_withoutcommand(tmp);</span>
<span class="fc" id="L51">            }</span>
<span class="fc" id="L52">            else this.color=&quot;purple&quot;;</span>
<span class="fc" id="L53">            build_round=App.round;</span>
<span class="fc" id="L54">        }</span>
    },
<span class="fc" id="L56">    Keep(&quot;Keep&quot;){</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return null
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc" id="L66">            p.println(&quot;Keep is is triggered&quot;);</span>
<span class="fc" id="L67">            return null;</span>
        }
    },
<span class="fc" id="L70">    Laboratory(&quot;Laboratory&quot;){</span>
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc" id="L79">            Special(p, x);</span>
<span class="fc" id="L80">        }</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return null
         */
        @Override
        public Object Special(Player p, Object x){
            String opt;
            int i, j;
<span class="fc" id="L92">            App app=(App) x;</span>
<span class="fc bfc" id="L93" title="All 2 branches covered.">            if(p.cards.isEmpty()) return null;</span>
<span class="fc bfc" id="L94" title="All 2 branches covered.">            if(!p.AIplayer) {</span>
<span class="fc" id="L95">                p.print(&quot;Laboratory is triggered. Do you want to discard a card to gain 1 gold?: Y(yes), N(no)\n&gt; &quot;);</span>
<span class="fc" id="L96">                opt=app.getInput_withoutcommand(new Object[]{&quot;Y&quot;, &quot;N&quot;},&quot;Please enter Y/N&quot;);</span>
            }
            else
<span class="fc bfc" id="L99" title="All 2 branches covered.">                if(p.cards.size()&gt;5) opt=&quot;y&quot;;</span>
<span class="fc" id="L100">                else opt=&quot;n&quot;;</span>
            
<span class="fc bfc" id="L102" title="All 2 branches covered.">            if(opt.equals(&quot;n&quot;)) return null;</span>

<span class="fc bfc" id="L104" title="All 2 branches covered.">            if(!p.AIplayer) {</span>
<span class="fc" id="L105">                p.println(&quot;Choose a card to discard: discard &lt;option&gt;&quot;);</span>
<span class="fc bfc" id="L106" title="All 2 branches covered.">                for(i=0;i&lt;p.cards.size();i++) p.println((i+1)+&quot;. &quot;+p.cards.get(i).toString());</span>
<span class="fc" id="L107">                p.print(&quot;&gt; &quot;);</span>
<span class="fc" id="L108">                Object[] tmp=new Object[p.cards.size()];</span>
<span class="fc bfc" id="L109" title="All 2 branches covered.">                for(i=0;i&lt;p.cards.size();i++) tmp[i]=&quot;discard &quot;+(i+1);</span>
<span class="fc" id="L110">                opt=app.getInput_withoutcommand(tmp);</span>
<span class="fc" id="L111">            }</span>
<span class="fc" id="L112">            else opt=&quot;discard 1&quot;;</span>
<span class="fc" id="L113">            j=Integer.parseInt(opt.split(&quot; &quot;)[1])-1;</span>
<span class="fc" id="L114">            Card card=p.cards.remove(j);</span>
<span class="fc" id="L115">            App.deck.dis_push(card);</span>
<span class="fc" id="L116">            p.gold++;</span>
<span class="fc" id="L117">            p.println(&quot;Player discard a card to gain 1 gold&quot;);</span>
<span class="fc" id="L118">            return null;</span>
        }
    },
<span class="fc" id="L121">    Smithy(&quot;Smithy&quot;){</span>
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc" id="L130">           Special(p, x);</span>
<span class="fc" id="L131">        }</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return null
         */
        @Override
        public Object Special(Player p, Object x){
            String opt;
<span class="fc" id="L142">            App app=(App) x;</span>
<span class="fc bfc" id="L143" title="All 2 branches covered.">            if(p.gold&lt;2) return null;</span>
<span class="fc bfc" id="L144" title="All 2 branches covered.">            if(!p.AIplayer) {</span>
<span class="fc" id="L145">                p.print(&quot;Smithy is triggered. Do you want to pay 2 gold to draw 3 cards?: Y(yes), N(no)\n&gt; &quot;);</span>
<span class="fc" id="L146">                opt=app.getInput_withoutcommand(new Object[]{&quot;Y&quot;, &quot;N&quot;},&quot;Please enter Y/N&quot;);</span>
            }
            else
<span class="fc bfc" id="L149" title="All 2 branches covered.">                if(p.gold&gt;7) opt=&quot;y&quot;;</span>
<span class="fc" id="L150">                else opt=&quot;n&quot;;</span>
            
<span class="fc bfc" id="L152" title="All 2 branches covered.">            if(opt.equals(&quot;n&quot;)) return null;</span>
<span class="fc" id="L153">            p.drawCard();</span>
<span class="fc" id="L154">            p.drawCard();</span>
<span class="fc" id="L155">            p.drawCard();</span>
<span class="fc" id="L156">            p.gold-=2;</span>
<span class="fc" id="L157">            p.println(&quot;Player pay 2 gold to draw 3 cards&quot;);</span>
<span class="fc" id="L158">            return null;</span>
        }
    },
<span class="fc" id="L161">    Observatory(&quot;Observatory&quot;){</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return whether having this card
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc bfc" id="L171" title="All 2 branches covered.">            return p.CardContain(p.building, &quot;Observatory&quot;)!=null;</span>
        }
    },
<span class="fc" id="L174">    Graveyard(&quot;Graveyard&quot;){</span>
        Player owner; //who have this card
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc" id="L184">           owner=p;</span>
<span class="fc" id="L185">        }</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return return true if pay gold to gain this card, otherwise null
         */
        @Override
        public Object Special(Player p, Object x){
<span class="pc bpc" id="L195" title="2 of 8 branches missed.">            if(owner==null || owner.AIplayer || owner.ch==GameCharacter.Warlord || owner.gold&lt;1) return null;</span>
<span class="fc" id="L196">            p.print(&quot;Graveyard is triggered. Do you want to pay 1 gold to gain this card?: Y(yes), N(no)\n&gt; &quot;);</span>
<span class="fc" id="L197">            String opt=p.app.getInput_withoutcommand(new Object[]{&quot;Y&quot;, &quot;N&quot;},&quot;Please enter Y/N&quot;);</span>
<span class="fc" id="L198">            Card card=(Card)x;</span>
<span class="fc bfc" id="L199" title="All 2 branches covered.">            if(opt.equals(&quot;y&quot;)){</span>
<span class="fc" id="L200">                p.println(&quot;You gain this card&quot;);</span>
<span class="fc" id="L201">                owner.cards.add(card);</span>
<span class="fc" id="L202">                owner.gold--;</span>
<span class="fc" id="L203">                return Boolean.TRUE;</span>
            }
<span class="fc" id="L205">            return null;</span>
        }
        /**
         * Handles cleanup when the card is destroyed.
         */
        @Override
        public void destroyed(){
<span class="fc" id="L212">            owner=null;</span>
<span class="fc" id="L213">        }</span>
    },
<span class="fc" id="L215">    Dragon_Gate(&quot;Dragon Gate&quot;){</span>
        /**
         * Provides extra Score
         *
         * @return 2
         */
        @Override
<span class="fc" id="L222">        public int extraScore(Player p){return 2;}</span>
    },
<span class="fc" id="L224">    University(&quot;University&quot;){</span>
        /**
         * Provides extra Score
         *
         * @return 2
         */
        @Override
<span class="fc" id="L231">        public int extraScore(Player p){return 2;}</span>
    },
    //Library,
    //Great Wall,
<span class="fc" id="L235">    School_Of_Magic(&quot;School Of Magic&quot;){</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return null
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc bfc" id="L245" title="All 8 branches covered.">            if(p.ch==GameCharacter.King || p.ch==GameCharacter.Bishop || </span>
                p.ch==GameCharacter.Merchant || p.ch==GameCharacter.Warlord){
<span class="fc" id="L247">                p.println(&quot;School Of Magic is triggered&quot;);</span>
<span class="fc" id="L248">                p.gold++;</span>
            }
<span class="fc" id="L250">            return null;</span>
        }
    },
<span class="fc" id="L253">    Lighthouse(&quot;Lighthouse&quot;){</span>
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc" id="L262">            App app=(App) x;</span>

<span class="fc" id="L264">            p.println(&quot;Lighthouse is triggered&quot;);</span>
<span class="fc" id="L265">            int i, j, num=App.deck.deck.size();</span>
<span class="fc bfc" id="L266" title="All 2 branches covered.">            if(!p.AIplayer){</span>
<span class="fc" id="L267">                p.println(&quot;Pick one of the following cards from the deck: 'collect card &lt;option&gt;'.&quot;);</span>
<span class="fc bfc" id="L268" title="All 2 branches covered.">                for(i=0;i&lt;num;i++) p.println((i+1)+&quot; &quot;+App.deck.deck.get(i).toString());</span>
<span class="fc" id="L269">                p.print(&quot;&gt; &quot;);</span>
            }
            String opt;
<span class="fc" id="L272">            Object[] l=new Object[num];</span>
<span class="fc bfc" id="L273" title="All 2 branches covered.">            for(i=0;i&lt;num;i++) l[i]=&quot;collect card &quot;+(i+1);</span>
<span class="fc bfc" id="L274" title="All 2 branches covered.">            if(p.AIplayer) opt=&quot;collect card 1&quot;;</span>
<span class="fc" id="L275">            else opt=app.getInput_withoutcommand(l);</span>
<span class="fc" id="L276">            j=Integer.parseInt(opt.split(&quot; &quot;)[2]);</span>
<span class="fc" id="L277">            p.addCard(App.deck.deck.remove(j-1));</span>
<span class="fc" id="L278">            p.println(&quot;Player gained 1 card&quot;);</span>
<span class="fc" id="L279">            App.deck.shuffle();</span>
<span class="fc" id="L280">        }</span>
    },
<span class="fc" id="L282">    Armory(&quot;Armory&quot;){</span>
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc" id="L291">            Special(p, x);</span>
<span class="fc" id="L292">        }</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return null
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc bfc" id="L302" title="All 2 branches covered.">            if(p.AIplayer) return null;</span>
<span class="fc" id="L303">            p.print(&quot;Armory is triggered. Do you want to destroy it in order to destory any other district?: Y(yes), N(no)\n&gt; &quot;);</span>
<span class="fc" id="L304">            App app=(App) x;</span>
<span class="fc" id="L305">            String opt=app.getInput_withoutcommand(new Object[]{&quot;Y&quot;, &quot;N&quot;},&quot;Please enter Y/N&quot;);</span>
<span class="fc bfc" id="L306" title="All 2 branches covered.">            if(opt.equals(&quot;n&quot;)) return null;</span>

            int i, j;
<span class="fc" id="L309">            app.print(&quot;Who do you want to destroy? Choose a player from 2-&quot;+App.n+&quot;:\n&gt; &quot;);</span>
<span class="fc" id="L310">            Object[] tmp=new Object[App.n-1];</span>
<span class="fc bfc" id="L311" title="All 2 branches covered.">            for(i=2;i&lt;=App.n;i++) tmp[i-2]=i;</span>
<span class="fc" id="L312">            opt=app.getInput_withoutcommand(tmp);</span>
<span class="fc" id="L313">            j=Integer.parseInt(opt);</span>
<span class="fc bfc" id="L314" title="All 2 branches covered.">            if(app.player[j].building.size()==0){</span>
<span class="pc bpc" id="L315" title="1 of 2 branches missed.">                if(!p.AIplayer) app.println(&quot;This player's city has not any district&quot;);</span>
<span class="fc" id="L316">                return null;</span>
            }

<span class="fc" id="L319">            int index=j;</span>
<span class="fc" id="L320">            Player new_p=app.player[j];</span>
<span class="fc" id="L321">            List&lt;Card&gt; goal=new_p.building;</span>
<span class="fc" id="L322">            app.println(&quot;Please choose a district to destroy: \&quot;destroy &lt;option&gt;\&quot;&quot;);</span>
<span class="fc bfc" id="L323" title="All 2 branches covered.">            for(i=0;i&lt;goal.size();i++) p.println((i+1)+&quot;. &quot;+goal.get(i).toString());</span>
<span class="fc" id="L324">            app.print(&quot;&gt; &quot;);</span>
<span class="fc" id="L325">            tmp=new Object[goal.size()];</span>
<span class="fc bfc" id="L326" title="All 2 branches covered.">            for(i=0;i&lt;goal.size();i++) tmp[i]=&quot;destroy &quot;+(i+1);</span>
<span class="fc" id="L327">            opt=app.getInput_withoutcommand(tmp);</span>
<span class="fc" id="L328">            j=Integer.parseInt(opt.split(&quot; &quot;)[1])-1;</span>

<span class="fc" id="L330">            Card card=goal.get(j);</span>
<span class="fc" id="L331">            p.println(&quot;Player &quot;+index+&quot;: &quot;+card.toString()+&quot; is destroyed&quot;);</span>
<span class="fc" id="L332">            card.skill.destroyed();</span>
<span class="fc" id="L333">            App.deck.dis_push(goal.remove(j));</span>
<span class="fc" id="L334">            Card itself=p.CardContain(p.building, &quot;Armory&quot;);</span>
<span class="fc" id="L335">            App.deck.dis_push(itself);</span>
<span class="fc" id="L336">            p.building.remove(itself);</span>
<span class="fc" id="L337">            return null;</span>
        }
    },
<span class="fc" id="L340">    Museum(&quot;Museum&quot;){</span>
<span class="fc" id="L341">        List&lt;Card&gt; under=new ArrayList&lt;&gt;();</span>
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc" id="L350">            Special(p, x);</span>
<span class="fc" id="L351">        }</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return null
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc" id="L361">            App app=(App) x;</span>
            int i, j, num;
            String opt;
<span class="fc bfc" id="L364" title="All 4 branches covered.">            if(p.cards.size()==0 || p.AIplayer) return null;</span>

<span class="fc" id="L366">            p.println(&quot;Museum is triggered&quot;);</span>
<span class="fc" id="L367">            num=0;</span>
            while(true){
<span class="fc bfc" id="L369" title="All 2 branches covered.">                if(p.cards.size()==0) break;</span>
<span class="fc" id="L370">                p.println(&quot;You can place some cards under Museum, \&quot;select &lt;id&gt;\&quot; to place and \&quot;q\&quot; to exit.&quot;);</span>
<span class="fc bfc" id="L371" title="All 2 branches covered.">                for(i=0;i&lt;p.cards.size();i++) p.println((i+1)+&quot;. &quot;+p.cards.get(i).toString());</span>
<span class="fc" id="L372">                p.print(&quot;&gt; &quot;);</span>
<span class="fc" id="L373">                Object[] tmp=new Object[p.cards.size()+1];</span>
<span class="fc bfc" id="L374" title="All 2 branches covered.">                for(i=0;i&lt;p.cards.size();i++) tmp[i]=&quot;select &quot;+(i+1);</span>
<span class="fc" id="L375">                tmp[p.cards.size()]=&quot;q&quot;;</span>
<span class="fc" id="L376">                opt=app.getInput_withoutcommand(tmp);</span>
<span class="fc bfc" id="L377" title="All 2 branches covered.">                if(opt.equals(&quot;q&quot;)) break;</span>
<span class="fc" id="L378">                j=Integer.parseInt(opt.split(&quot; &quot;)[1])-1;</span>
<span class="fc" id="L379">                under.add(p.cards.remove(j));</span>
<span class="fc" id="L380">                num++;</span>
<span class="fc" id="L381">            }</span>
<span class="fc" id="L382">            p.println(&quot;Player placed &quot;+num+&quot; card under Museum&quot;);</span>
<span class="fc" id="L383">            return null;</span>
        }
        /**
         * Provides extra Score
         *
         * @return how many cards under Museum
         */
        @Override
<span class="fc" id="L391">        public int extraScore(Player p){return under.size();}</span>
        /**
         * Handles cleanup when the card is destroyed.
         * put all cards under Museum into discard deck
         */
        @Override
        public void destroyed(){
<span class="fc bfc" id="L398" title="All 2 branches covered.">            for(Card card: under) App.deck.dis_push(card);</span>
<span class="fc" id="L399">            under.clear();</span>
<span class="fc" id="L400">        }</span>
    },
<span class="fc" id="L402">    Imperial_Treasury(&quot;Imperial Treasury&quot;){</span>
        /**
         * Provides extra Score
         *
         * @return player's gold
         */
        @Override
<span class="fc" id="L409">        public int extraScore(Player p){return p.gold;}</span>
    },
<span class="fc" id="L411">    Map_Room(&quot;Map Room&quot;){</span>
        /**
         * Provides extra Score
         *
         * @return the number of cards in player's hand
         */
        @Override
<span class="fc" id="L418">        public int extraScore(Player p){return p.cards.size();}</span>
    },
<span class="fc" id="L420">    Wishing_Well(&quot;Wishing Well&quot;){</span>
        /**
         * Provides extra Score
         *
         * @return how many other purple cards
         */
        @Override
        public int extraScore(Player p){
<span class="fc" id="L428">            int sum=-1;</span>
<span class="fc bfc" id="L429" title="All 4 branches covered.">            for(Card card: p.cards) if(card.color.equals(&quot;purple&quot;)) sum++;</span>
<span class="fc" id="L430">            return sum;</span>
        }
    },
<span class="fc" id="L433">    Quarry(&quot;Quarry&quot;){</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return return true if there are duplicates, otherwise false
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc bfc" id="L443" title="All 2 branches covered.">            return p.building.size()-(new HashSet&lt;&gt;(p.building)).size()&gt;0;</span>
        }
    },
<span class="fc" id="L446">    Poor_House(&quot;Poor House&quot;){</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return null
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc bfc" id="L456" title="All 2 branches covered.">            if(p.gold==0){</span>
<span class="fc" id="L457">                p.println(&quot;Poor House is triggered&quot;);</span>
<span class="fc" id="L458">                p.gold++;</span>
            }
<span class="fc" id="L460">            return null;</span>
        }
    },
<span class="fc" id="L463">    Bell_Tower(&quot;Bell Tower&quot;){</span>
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc" id="L472">            p.println(&quot;Bell Tower is triggered&quot;);</span>
<span class="fc" id="L473">            App.end_building_num=7;</span>
<span class="fc" id="L474">        }</span>
        /**
         * Handles cleanup when the card is destroyed.
         */
        @Override
        public void destroyed(){
<span class="fc" id="L480">            App.end_building_num=8;</span>
<span class="fc" id="L481">        }</span>
    },
    //Factory,
<span class="fc" id="L484">    Park(&quot;Park&quot;){</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return null
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc bfc" id="L494" title="All 2 branches covered.">            if(p.cards.size()==0){</span>
<span class="fc" id="L495">                p.println(&quot;Park is triggered&quot;);</span>
<span class="fc" id="L496">                p.drawCard();</span>
<span class="fc" id="L497">                p.drawCard();</span>
            }
<span class="fc" id="L499">            return null;</span>
        }
    },
<span class="fc" id="L502">    Hospital(&quot;Hospital&quot;){</span>
        /**
         * Activates the special ability.
         *
         * @param p the player invoking the skill
         * @param x additional context for the activation
         * @return return true if having Hospital, otherwise false
         */
        @Override
        public Object Special(Player p, Object x){
<span class="fc bfc" id="L512" title="All 2 branches covered.">            return p.CardContain(p.building, &quot;Hospital&quot;)!=null;</span>
        }
    },
<span class="fc" id="L515">    Throne_Room(&quot;Throne Room&quot;){</span>
        private Player p;    //who have this card
        /**
         * Called when a player builds a district to apply the effect.
         *
         * @param p the player building a district
         * @param x additional context
         */
        @Override
        public void OnBuilding(Player p, Object x){
<span class="fc" id="L525">            this.p=p;</span>
<span class="fc" id="L526">        }</span>
        /**
         * Provides extra resources
         *
         * @return null
         */
        @Override
        public Object extraResource(){
<span class="fc bfc" id="L534" title="All 2 branches covered.">            if(p!=null) {</span>
<span class="fc" id="L535">                p.println(&quot;Throne_Room is triggered&quot;);</span>
<span class="fc" id="L536">                p.gold++;</span>
            }
<span class="fc" id="L538">            return null;</span>
        }
        /**
         * Handles cleanup when the card is destroyed.
         */
        @Override
<span class="fc" id="L544">        public void destroyed(){p=null;}</span>
    },
<span class="fc" id="L546">    NonePurple(&quot;&quot;);</span>
    private String name;
    /**
     * Constructs a Skill enum constant with the specified display name.
     *
     * @param name the display name of the skill
     */
<span class="fc" id="L553">    private Skill(String name){</span>
<span class="fc" id="L554">        this.name=name;</span>
<span class="fc" id="L555">    }</span>
    /**
     * Returns the display name of this skill.
     *
     * @return skill name
     */
<span class="fc" id="L561">    public String getname(){return name;}</span>
    /**
     * Triggered when a player builds a district to execute skill logic.
     * Default implementation is nothing.
     *
     * @param p the player building a district
     * @param x additional context object
     */
<span class="nc" id="L569">    public void OnBuilding(Player p, Object x){}</span>
    /**
     * Activates the skill's special ability.
     * Default implementation returns null.
     *
     * @param p the player invoking the ability
     * @param x additional parameters
     * @return result of the special ability, or null if none
     */
<span class="nc" id="L578">    public Object Special(Player p, Object x){return null;}</span>
    /**
     * Provides extra resources when certain conditions are met.
     * Default implementation returns null.
     *
     * @return extra resource value, or null if none
     */
<span class="nc" id="L585">    public Object extraResource() {return null;}</span>
    /**
     * Calculates additional score granted by this skill at game end.
     * Default implementation returns 0.
     *
     * @param p the player for whom to calculate extra score
     * @return extra score points
     */
<span class="fc" id="L593">    public int extraScore(Player p){return 0;}</span>
    /**
     * Handles cleanup when a district associated with the skill is destroyed.
     * Default implementation is nothing
     */
<span class="fc" id="L598">    public void destroyed(){}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>